nYoy
?attach
nYoy[,NULL]
is.null(nYoy)
is.null(data)
data
get(data)
data
is.object(data)
is.object(nYoy)
is.object(NULL)
source('~/.active-rstudio-document', echo=TRUE)
plotError("sample","mean",data=nYoy,upper.y="upper",lower.y='lower',interval.type='asedf')
nYoy
plotError("sampleNumAdj","mean",data=nYoy,upper.y="upper",lower.y='lower',interval.type='asedf')
y
source('~/.active-rstudio-document', echo=TRUE)
plotError("sampleNumAdj","mean",data=nYoy,upper.y="upper",lower.y='lower',interval.type='asedf')
y
is.vector(y)
nYoy[[x]]
nYoy[['sampleNumAdj']]
source('~/.active-rstudio-document', echo=TRUE)
plotError("sampleNumAdj","mean",data=nYoy,upper.y="upper",lower.y='lower',interval.type='asedf')
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
plotError("sampleNumAdj","mean",data=nYoy,upper.y="upper",lower.y='lower',interval.type='asedf')
?plot
source('~/.active-rstudio-document', echo=TRUE)
plotError("sampleNumAdj","mean",data=nYoy,upper.y="upper",lower.y='lower',interval.type='asedf')
plotError(sampleNumAdj,mean,data=nYoy,upper.y=upper,lower.y=lower,interval.type='asedf')
plot(sampleNumAdj,mean,data=nYoy)
plot(mean~sampleNumAdj,data=nYoy)
plotBla<-function(x,y,...){plot(y~x,...)}
plotBla(mean~sampleNumAdj,data=nYoy)
plotBla(mean,sampleNumAdj,data=nYoy)
lm
source('~/.active-rstudio-document', echo=TRUE)
plotError(sampleNumAdj,mean,data=nYoy,upper.y=upper,lower.y=lower,interval.type='asedf')
plotError("sampleNumAdj","mean",data=nYoy,upper.y="upper",lower.y='lower',interval.type='asedf')
nYoy
warnings()
plotError <- function(x, y, upper.y=NULL,data=NULL,
lower.y=upper.y,upper.x=NULL,lower.x=upper.x,
length=0.03,x.bar=F,y.bar=T,interval.type="dist",zero.truncate=F,...){
if(is.object(data)){
x<-data[[x]]
y<-data[[y]]
if(!is.null(upper.y)){upper.y<-data[[upper.y]]}
if(!is.null(lower.y)){lower.y<-data[[lower.y]]}
if(!is.null(upper.x)){upper.x<-data[[upper.x]]}
if(!is.null(lower.x)){lower.x<-data[[lower.x]]}
}
plot(y~x,...)
if(y.bar==T){
if(length(x) != length(y) | length(y) !=length(lower.y) |
length(lower.y) != length(upper.y))
{stop("vectors must be same length")}
if(interval.type=="dist"){
upper.y<-y+upper.y
lower.y<-y-lower.y
}
if(zero.truncate==T){
for(i in 1:length(lower.y)){
lower.y[i]<-max(0,lower.y[i])
}}
suppressWarnings(arrows(x,upper.y,x,lower.y, angle=90,
code=3, length=length, ...))}
if(x.bar==T){
if(length(x) != length(y) | length(y) !=length(lower.x) |
length(lower.x) != length(upper.x))
{stop("vectors must be same length")}
if(interval.type=="dist"){
upper.x<-x+upper.x
lower.x<-x-lower.x
}
suppressWarnings(arrows(upper.x,y,lower.x,y,angle=90,code=3,length=length,...))
}
}
source('~/.active-rstudio-document', echo=TRUE)
plotError("sampleNumAdj","mean",data=nYoy,upper.y="upper",lower.y="lower",interval.type='asdf')
plotError("sampleNumAdj","mean",data=nYoy,upper.y="upper",lower.y="lower",interval.type='difference')
plotError("sampleNumAdj","mean",data=nYoy,upper.y="upper",lower.y="lower",interval.type='diff')
plotError("sampleNumAdj","mean",data=nYoy,upper.y="upper",lower.y="lower",interval.type='distance')
plotError("sampleNumAdj","mean",data=nYoy,upper.y="upper",lower.y="lower",interval.type='dist')
plotError("sampleNumAdj","mean",data=nYoy,upper.y="upper",lower.y="lower",interval.type='asdf')
plotError("sampleNumAdj","mean",data=nYoy,upper.y="upper",lower.y="lower",interval.type='asdf',pch=19)
plotError("year","mean",data=nYoy[year>=2002 & season==3],
upper.y="upper",lower.y="lower",pch=19)
r=1
plotError("year","mean",
data=nYoy[year>=2002 & season==3 & river==r],
upper.y="upper",lower.y="lower",pch=19)
is.null(ylim)
is.object(ylim)
source('~/.active-rstudio-document', echo=TRUE)
plotError("year","mean",
data=nYoy[year>=2002 & season==3 & river==r],
upper.y="upper",lower.y="lower",pch=19,
ylim=c())
source('~/R/plotError.R', echo=TRUE)
plotError <- function(x, y, upper.y=NULL,data=NULL,
lower.y=upper.y,upper.x=NULL,lower.x=upper.x,
length=0.03,x.bar=F,y.bar=T,interval.type="dist",
zero.truncate=F,ylim=NULL,...){
if(is.object(data)){
x<-data[[x]]
y<-data[[y]]
if(!is.null(upper.y)){upper.y<-data[[upper.y]]}
if(!is.null(lower.y)){lower.y<-data[[lower.y]]}
if(!is.null(upper.x)){upper.x<-data[[upper.x]]}
if(!is.null(lower.x)){lower.x<-data[[lower.x]]}
}
if(interval.type=="dist" & y.bar==T){
upper.y<-y+upper.y
lower.y<-y-lower.y
}
if(interval.type=="dist" & x.bar==T){
upper.x<-x+upper.x
lower.x<-x-lower.x
}
if(is.null(ylim)){
ylim=c(min(lower.y),max(upper.y))
}
plot(y~x,ylim=ylim,...)
if(y.bar==T){
if(length(x) != length(y) | length(y) !=length(lower.y) |
length(lower.y) != length(upper.y))
{stop("vectors must be same length")}
if(zero.truncate==T){
for(i in 1:length(lower.y)){
lower.y[i]<-max(0,lower.y[i])
}}
suppressWarnings(arrows(x,upper.y,x,lower.y, angle=90,
code=3, length=length, ...))}
if(x.bar==T){
if(length(x) != length(y) | length(y) !=length(lower.x) |
length(lower.x) != length(upper.x))
{stop("vectors must be same length")}
suppressWarnings(arrows(upper.x,y,lower.x,y,angle=90,code=3,length=length,...))
}
}
plotError("year","mean",
data=nYoy[year>=2002 & season==3 & river==r],
upper.y="upper",lower.y="lower",pch=19)
source('~/.active-rstudio-document', echo=TRUE)
plotError("year","mean",
data=nYoy[year>=2002 & season==3 & river==r],
upper.y="upper",lower.y="lower",
interval.type='absolute',
pch=19,xlab="",ylab='N YOY')
plotError("year","mean",
data=nYoy[year>=2002 & season==3 & river==r],
upper.y="upper",lower.y="lower",
interval.type='absolute',
pch=19,xlab="",ylab='N YOY',bty='l')
plotError("year","mean",
data=nYoy[year>=2002 & season==3 & river==r],
upper.y="upper",lower.y="lower",
interval.type='absolute',
pch=19,xlab="",ylab='N YOY',bty='l',type='b')
r
r=1
plotError("year","mean",
data=nYoy[year>=2002 & season==3 & river==r],
upper.y="upper",lower.y="lower",
interval.type='absolute',
pch=19,xlab="",ylab='N YOY',bty='l',type='b')
source('C:/Users/Evan/Desktop/Conte/westbrookJS/results/plotN.R', echo=TRUE)
tiff.par("~/westbrookJS/results/nFallYoy.tif",
mfrow=c(4,1))
for(r in 1:4){
plotError("year","mean",
data=nYoy[year>=2002 & season==3 & river==r],
upper.y="upper",lower.y="lower",
interval.type='absolute',
pch=19,xlab="",ylab='N YOY',
bty='l',type='b',col=palette()[r])
}
dev.off()
sims$psi
density.plot(sims$psi)
density(sims$psi)
plot(density(sims$psi))
dim(sims$nYoy)
plot(density(sims$nYoy[,20,1]))
plot(density(sims$nYoy[,20,2]))
plot(density(sims$nYoy[,20,3]))
plot(density(sims$nYoy[,25,3]))
plot(density(sims$nYoy[,35,3]))
plot(density(sims$nYoy[,45,3]))
traceplot(out)
evalList$sampleRows
makeDMData()
source('C:/Users/Evan/Desktop/Conte/westbrookJS/summarize.R', echo=TRUE)
source('C:/Users/Evan/Desktop/Conte/westbrookJS/summarize.R', echo=TRUE)
source('C:/Users/Evan/Desktop/Conte/westbrookJS/results/plotN.R', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
dev.off()
dev.off()
dev.off()
source('~/.active-rstudio-document', echo=TRUE)
sims
plot(density(sims$psi))
source('C:/Users/Evan/Desktop/Conte/westbrookJS/summarize.R', echo=TRUE)
ou
out
plot(density(sims$psi))
sims$b
dim(sims$b)
summarize(sims$b)
b
b<-summarize(sims$b)
b
plotError("sample","mean",upper.y="upper",lower.y="lower",interval.type="asdf",data=b)
plotError("sample","mean",upper.y="upper",lower.y="lower",interval.type="asdf",data=b,ylim=c(0,0.1))
plotError("sample","mean",upper.y="upper",lower.y="lower",interval.type="asdf",data=b[sample !=1],ylim=c(0,0.1))
plotError("sample","mean",upper.y="upper",lower.y="lower",interval.type="asdf",data=b[sample !=1]
)
source('C:/Users/Evan/Desktop/Conte/westbrookJS/summarize.R', echo=TRUE)
d
load("~/westbrookJS/dMDataOutbkt1996_2014.rDATA")
source('~/.active-rstudio-document', echo=TRUE)
d$tag
dMData[is.na(river)]
a<-dMData[,length(unique(tag)),by=list(riverN,cohort)]
a
unique(dMData$river)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
rivers
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
dev.off()
source('~/.active-rstudio-document', echo=TRUE)
dev.off()
dMData$cohort
source('~/.active-rstudio-document', echo=TRUE)
pAdult
?saveRDS
source('~/.active-rstudio-document', echo=TRUE)
warnings()
?jags.model
source('~/.active-rstudio-document', echo=TRUE)
results
obear<-data.table(var=NA,mean=1,lower=1,upper=1,parameter='pAdult',
sample=pAdult[river==1,sample],
river=3,
season=pAdult[river==1,season],
year=pAdult[river==1,year]
)
obear
pAdult<-rbind(pAdult,obear)
pAdult
source('~/.active-rstudio-document', echo=TRUE)
pAdult
pAdult[river==4]
load("~/westbrookJS/resultsBnt/outJS.rDATA")
outArray<-as.array(out)
summarize<-function(x,margin=c(2)){
getSummary<-function(x){
meanX<-mean(x)
quantiles<-quantile(x,c(0.025,0.975))
return(c(meanX,quantiles))
}
stringSplit<-function(x,split,element){
sapply(strsplit(x,split), "[[", element)
}
result<-data.table(dcast(melt(apply(x,MARGIN=margin,FUN=getSummary)),
var~Var1))
setnames(result,c("var","mean","lower","upper"))
result[,var:=as.character(var)]
result[,parameter:=unlist(strsplit(var,"[[]"))[seq(1,nrow(result)*2-1,2)]]
result[grep(",",var),
sample:=stringSplit(stringSplit(var,"[[]",2),",",1)]
result[,river:=substr(var,start=nchar(var)-1,stop=nchar(var)-1)]
result[,sample:=as.numeric(sample)]
return(result)
}
results<-summarize(outArray)
setkey(results,parameter,river,sample)
results[,
(sample/4-floor(sample/4))*4]
source('C:/Users/Evan/Desktop/Conte/westbrookJS/summarizeBnt.R', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
pAdult
pAdult[,year:=cieling(sample/4)+2000]
pAdult[,year:=ceiling(sample/4)+2000]
results[,year:=ceiling(sample/4)+2000]
source('~/.active-rstudio-document', echo=TRUE)
results
hist(results$year)
hist(results$year)
source('C:/Users/Evan/Desktop/Conte/westbrookJS/summarize.R', echo=TRUE)
source('C:/Users/Evan/Desktop/Conte/westbrookJS/summarizeBnt.R', echo=TRUE)
outArray
dim(outArray)
dimnames(outArray)
traceplot(out)
outArray<-as.array(out)
dim(outArray)
results
results$parameter
for(i in 169:504){plot(density(outArray[,i,]))}
source('C:/Users/Evan/Desktop/Conte/westbrookJS/summarize.R', echo=TRUE)
warnings()
source('C:/Users/Evan/Desktop/Conte/westbrookJS/summarize.R', echo=TRUE)
nAdult
source('C:/Users/Evan/Desktop/Conte/westbrookJS/summarize.R', echo=TRUE)
source('C:/Users/Evan/Desktop/Conte/westbrookJS/summarizeBnt.R', echo=TRUE)
nAdult
source('C:/Users/Evan/Desktop/Conte/westbrookJS/summarize.R', echo=TRUE)
saveRDS(nAdult,"~/westbrookJS/results/nAdult.rds")
nAdult
bkt<-nAdult
source('C:/Users/Evan/Desktop/Conte/westbrookJS/summarizeBnt.R', echo=TRUE)
saveRDS(nAdult,"~/westbrookJS/resultsBnt/nAdult.rds")
warnings()
nAdult
source('C:/Users/Evan/Desktop/Conte/westbrookJS/summarize.R', echo=TRUE)
source('C:/Users/Evan/Desktop/Conte/westbrookJS/summarizeBnt.R', echo=TRUE)
out
autocorr(out)
load("~/westbrookJS/resultsBnt/outJS.rDATA")
traceplot(out)
outArray<-as.array(out)
dim(outArray)
outArray
10000/5
outArray<-outArray[1001:2000,,]
source('~/.active-rstudio-document', echo=TRUE)
densityplot
density.plot
density.plot()
str(outArray)
str(outArray[,1,])
dim(outArray[,1,])
palette()
densityPlot<-function(x,nchains=3){
plot(density(x[,1]),col=palette()[1])
for(i in 2:nchains){
points(density(x[,i]),col=palette()[i])
}
}
densityPlot(outArray[,1,])
densityPlot<-function(x,nchains=3){
plot(density(x[,1]),col=palette()[1])
for(i in 2:nchains){
points(density(x[,i]),col=palette()[i],
type='l')
}
}
densityPlot(outArray[,1,])
densityPlot<-function(x,nchains=3){
plot(density(x[,1]),col=palette()[1],lwd=2)
for(i in 2:nchains){
points(density(x[,i]),col=palette()[i],
type='l',lwd=2)
}
}
densityPlot(outArray[,2,])
outArray[,2,]
head(outArray[,2,])
names(outArray)
dimnames(outArra7y)
dimnames(outArray)
str(dimnames(outArray))
dimnames(outArray)[1,2]
dimnames(outArray)[1]
dimnames(outArray)[2][1]
dimnames(outArray)[[2]][1]
for(i in 1:dim(outArray)[2]){
densityPlot(outArray[,i,],main=dimnames(outArray)[[2]][i])
}
densityPlot
densityPlot<-function(x,nchains=3,meain=NA){
plot(density(x[,1]),col=palette()[1],lwd=2)
for(i in 2:nchains){
points(density(x[,i]),col=palette()[i],
type='l',lwd=2)
}
}
for(i in 1:dim(outArray)[2]){
densityPlot(outArray[,i,],main=dimnames(outArray)[[2]][i])
}
dimnames(outArray)[[2]][i]
densityPlot<-function(x,nchains=3,meain=NA,lwd=2){
plot(density(x[,1]),col=palette()[1],...)
for(i in 2:nchains){
points(density(x[,i]),col=palette()[i],
type='l')
}
}
densityPlot<-function(x,nchains=3,meain=NA,lwd=2,...){
plot(density(x[,1]),col=palette()[1],...)
for(i in 2:nchains){
points(density(x[,i]),col=palette()[i],
type='l')
}
}
for(i in 1:dim(outArray)[2]){
densityPlot(outArray[,i,],main=dimnames(outArray)[[2]][i])
}
for(i in 506:672){
densityPlot(outArray[,i,],main=dimnames(outArray)[[2]][i])
}
load("~/westbrookJS/results/outJS.rDATA")
out
plot(out)
?plot
plot.jags(out)
plot.mcmc(ouyt)
plot.mcmc(out)
plot(out,trace=T,density=T,out.layout=F)
summarize<-function(x,margin=c(2,3)){
getSummary<-function(x){
meanX<-mean(x)
quantiles<-quantile(x,c(0.025,0.975))
return(c(meanX,quantiles))
}
result<-data.table(dcast(melt(apply(x,MARGIN=margin,FUN=getSummary)),
Var2+Var3~Var1))
setnames(result,c("sample","river","mean","lower","upper"))
result[,season:=rep(rep(1:4,each=4),14)]
return(result)
}
toSummarize<-c("pYoy","pAdult","phiYoy","phiAdult","nYoy","nAdult")
for(i in toSummarize){
assign(i,summarize(sims[[i]]))
}
rivers<-c("jimmy","mitchell","obear","west brook")
for(i in toSummarize){
tiff.par(paste0("results/",i,".tif"),mfrow=c(4,1),mar=c(3,3,1,0),mgp=c(2,0.5,0))
for(r in 1:4){
plot(mean~sample,data=get(i)[river==r],
pch=19,col=palette()[season],
ylim=if(grepl('n',i)) c(0,max(upper)) else c(0,1.1),
main=rivers[r],xlab="",ylab=i)
with(get(i)[river==r],
error.bar(sample,mean,
upper.y=upper,lower.y=lower,
interval.type='bla'))
}
#legend('bottom',c("spring","summer","fall","winter"),palette()[1:4],pch=19)
title(xlab="Sample Number")
dev.off()
}
plot(mean~sample,data=get(i)[river==r],
pch=19,col=palette()[season],
ylim=if(grepl('n',i)) c(0,max(upper)) else c(0,1.1),
main=rivers[r],xlab="",ylab=i)
phiYoy
for(i in toSummarize){
assign(i,summarize(sims[[i]]))
}
sims<-out$BUGSoutput$sims.list
toSummarize<-c("pYoy","pAdult","phiYoy","phiAdult","nYoy","nAdult")
for(i in toSummarize){
assign(i,summarize(sims[[i]]))
}
rivers<-c("jimmy","mitchell","obear","west brook")
for(i in toSummarize){
tiff.par(paste0("results/",i,".tif"),mfrow=c(4,1),mar=c(3,3,1,0),mgp=c(2,0.5,0))
for(r in 1:4){
plot(mean~sample,data=get(i)[river==r],
pch=19,col=palette()[season],
ylim=if(grepl('n',i)) c(0,max(upper)) else c(0,1.1),
main=rivers[r],xlab="",ylab=i)
with(get(i)[river==r],
error.bar(sample,mean,
upper.y=upper,lower.y=lower,
interval.type='bla'))
}
#legend('bottom',c("spring","summer","fall","winter"),palette()[1:4],pch=19)
title(xlab="Sample Number")
dev.off()
}
plot(mean~sample,data=get(i)[river==r],
pch=19,col=palette()[season],
ylim=if(grepl('n',i)) c(0,max(upper)) else c(0,1.1),
main=rivers[r],xlab="",ylab=i)
plot(out,trace=T,density=T,out.layout=F)
plot(out,trace=T,density=T,out.layout=T)
plot(out,trace=T,density=F,out.layout=T)
method(plot(out,trace=T,density=F,out.layout=T))
class(out)
as.mcmc.list(out)
as.mcmc(out)
a<-as.mcmc(out)
a<-as.mcmc.list(out)
a<-as.mcmc.list(a)
plot(a)
plot(a,auto.layout=F)
mfrow=c(5,5)
plot(a,density=Fauto.layout=F)
plot(a,density=F,auto.layout=F)
par(mfrow=c(5,5))
plot(a,density=F,auto.layout=F)
windows()
par(mfrow=c(5,5))
plot(a,density=F,auto.layout=F)
dev.interactive()
plot(a,density=F,auto.layout=F,dev.interactive())
windows()
par(mfrow=c(5,5))
plot(a,density=F,auto.layout=F,dev.interactive())
plot(a,density=F,auto.layout=F,ask=T
)
26*40*52
26*40*52*0.1273
